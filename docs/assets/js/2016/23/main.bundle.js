// @see https://babeljs.io/en/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=FAehAIGUBUEECVrgLTgAoCcD2BzDBDAWwDoArAZ2AGMsA7cgF3ABsBLWgU2i0gY3ZzgAvC3YdhAPnABvYAEgMHBgFcMtUZ2JYADuADU4AORH9GjsXwYc5ANoAGALqnjxgwAo2my9ZsBGJwA-AUaGAJQA3MAAvpHUdIzo2HhEwuBu0uDaSQSEADTg7IwYylQMrHTgUanSUaGSMvI09EzYAO7kqVm4OcSE-NpuHmL5rHVCUrJyck0J-KWsAG7iIqzCQivNxfN0kVMzTHNlSwD6VMz45B0ih4viAPxGN0vGAFwhuwpKqupu8lMAPHxwGcLuQAHJEDhCaRPDinc6XKISP4AhgAE2BCPBkOhsPhoKRKKmMPmS3AD3-ACNwIwAJ7MKHSDI0ZhYDBvQx9bB0YxRJEAKn-IEpUg5hiiRKF6ORU1RaKJ0yxEMIjLxIMRCrpDOhGQYHAAHgxYGwcLQOfwcAALBiGfLafBotECeCsK0MDm-DiEXkS2VyGV-klHe7gKkSaSsKJCkXgN6RyUgaWS9GY0HK1WkuHq8hI6SeLg8PgCIacUJRxNogNyKUYAMReS1XaKFRqNJ_f5OhY0hj0xkZABmDP1AHE2m9fJVCbLAfhKQyq9WGJSsGjaeG2jmpcvV1WpbP5yiO4sFxHNiUyhUpF1kiQGbQcAxLShwBOHr8_dXqVq-8CsKz2UYeAcBwtA-hIAAidAcNGC51G8tDKMwzC-gCICdgGQrofI9YxKAEAAKJguBz6YN0RBkJQeFQHAiDPvAHA4KwjAcBg5AUXEzTgPRjHMaxqTpOAig8XqfFVCINRjBMjTxEwGT4PklL5FQ-QYmJgkMUxInkE2Xytu-1ZYdOiHdr2OrgFyjFmuAdh2g6Tr3gAMhw_bukYvh2No-pgZKbASPgbwwuWvk-awEiUgFlJBaFIUSFQAVUFFC7_L5aIBWiiWHiAiEYWhx7YZEuFgOAhHEag3GaSxbEUMAVEwAgSCoAAQoo-AANYAPK0Ox2bgM1HBtZ14AGnqtBoh09GHMQADCWCENoUG0LJ0lnqUbJuF02jkHUkxyOQyjaCx63YJt9ZTI-TG9LS9H9qkE2lMQVAtXq11uKdErSXNC0MOBrBogAslgyiLa9DRnZaF2EFdzkPaoiiLVotBUJa-D3ssQ31DtcjnWxG1seQSjgRwCysFQHB9QNtBuNjl3XTDGBwwwxALPgzDKBwp1yLhnM1Z8o2HdtfzNt8bbTuclIcMwC7k614B0G8_zsNoygtM50LU5D11VCAu4gGLEt1rsEoSkVJXPtLnXsbVNENeAM2LdgzBVZQ-y9crDAVCIAnMdo-Te-QSng8waJw5U1S1Bjy0JP26ie5J3YcAMfv1vIQutlSbsVHQU1sFQrXQtHuZI6wQdw-WlIZ7QEgFbELt23wf5XJkx1XFJnwtj87aGQCnYmdqTLgHqhrGq6VmGKTi0sd5fr_I1Ffx9o0K48QxS0AAqotxfS0igBtpEKs8MO7leZV3Bl5dP--H_Pi_N8Q3tVH70K-FOfoAGQPh8qEX3QSVf-o3vXzoPGeptD32AeQR-dhn6ykANZECZf4_znv_aQS877z3AdIdykCFxyEAJtEcCK46y7phM-OFIgmyIs-OuDsnY1SKnVWiqA0T4AYPgbqMlwBMJYakGw8gMg6A5FQbQtJbTgG8OQN4NhDD4BEYYSkhgnBRFyLw2W2gORog4FQERYiJGyPkZUJRcg-GqKMII4R-RtHgEkdI_Ihg0R6MUco_hJihFaKsOIyxNlHj2IMUYgRLjzFuJ0XImxmiFE-JURydgmiAnWB0dIsJjjjG2I0a42Jlix7eMSRyUgtAABeqT3GSOiSgAATAkwxESjDqOKRYyRdjym-KMDk_JMTCm2JEcgAArA0ypySamBPSXInpTix7-NEQMyRwSTGZIqSM0xBSdHFPacMpJ1SFnpPqforJRgonrKKTMxphhml7PafkZAZStmzKSQwHAzATmhMuYc-ZrSJHIF8AANhCQc3pxyXmWN8F8lZfizHjLSTYAAnOCwFjyfl5L2QAdnhTYzZDirmRMRic-JMKRm7L-XU75IzfmgraXYs5FzUWHNxcSxZBKklEtqRks53StkODIQRChjDmGsOqlbeqz5CbE1JpbEA_J-TAHAPycAAADUx4B9TgFpFK8ApwdCsA4OQY40r9RKrcBwVgj4WKiPUOwPUOBDVsgHpacQxxmaszhLLG6-B1LCRYnUE1WBnUVQwNKxVxBxWSqlVEuVSrjhRJavjDVlrxC2rZg6z1vEtVKspLSWWmh_XSuqcG5V1Tw3qs1Qa8AMbxBYBukJL1ibwDJtTeYdNUrmlyoVSG0gyg5qRvdkagoK0LzqClYq0RrR8ApvWlgcg-rbjmX6vQcA_Y2QDowGicI4BOA4GYeOlUKMOiUjmK1OdaJQgKWVqm5gKbWA3SldqgoHRji0CwEwXJLEsDHD9RK2tNzmBZuOO7HAty81Rs7UUc85Qe0XvwAOod80TUCFEUwQofBAPxFEK1cQda8lKrRFgdVbx5qjuDBOjd07Z2WAXUuhiq6yTrqnVu3Ou7QgvHTeAZ8AAxC1xwoLIG8C2kCDBNWwa2N2_20qolJo0bNdVGaNFSvMaNURSFZYGu9WxjjKpFr_rg9sSjImVSCcRlK59kqGOoGY96z9rQsDsasJxxaPGu1AYEyh3JwmaAqg6DKoRkmjUYhZu-29VrvUMFM8gXj8GNNOeQ803T9HnzQCtaCyzDAOgltEQPXAP6MRBfU-M61N6Dj9n7BovUaIn2RdQAASUdeoZheo5owY6H0dRyXkvfoZB29L3bZbK1HfVgt14cj5GvT5qDyNtAHXoEViVDHnxlca7cqDXQ0QlDEyjZV7BbW_VU3xoDmqhhIelbKicJSpV1BRp5irB8vTaBqywZhhq6viHbQaDRys7vIxgzZug-QpXkFaqwXQ-rVP9TRBF8bBnwBTalW-pVX6f1Xv1fjZg_Ytszu9QaIg2gGQjDPfgJVTFpV2Hc-D25oilWmcQhiFhVglAFHixLcrGJxahe01QIn-6_2KD2swMo951vBcvUu29Q19SPYK-AIGZR30Fs4IaAerAtN_Zxy1JGHA0R6ZADVF20B2rDmHA5fCxxoDwFgGCSAjH2rwD-pAao8golqJSQY6p6LonyDfQ7208hmnAtd9MIR2S4VKNwhxBI9pWIcAcmIVI-YI5yAZEwIP8Xw9iFvmj_VbgXCnRdmW3ijcrEyKmYyqp8jdguzEdw1lVubpuAAIQZ60sQKJrN1HkHWpYeLfgHChAFlMWPth_CdEsPjErwMu-t_yO5N6PMxHECVuQS0TeMAt_8MnOQp60hD4uRXkQCFZMvxfuAKvGlM-18RvX9Vs-W9lPb6DOQq-nAiCD_3wfzfbBlJH3YMfZeV-P5sGvjfiFmAd7kBPlPjPtfm_m3MLI0kPo4K0pUNXLQqKumiVpyHzirF5imsjKNJ4IIIwNduAAAEQFp3RMBga4Hpr074DKD4yWo45ObzScAqbobqqgRMCtQ3qtDgCtBWrGpx64zAjoFmp6ZQAeolaCRAzSpI6kyrzaCcIcBKpEwsQpplBabdbZApBIwoxmpsTpqAB8G4AOy7gAsASABCZIAPB__qquPUAqJM4gw0IEY0XE_U90M0n0dBS00wMkfGa0uM_-e0B0GAR0gCHMLsmMPWKQIgNgDgBiUw2Bc-Agxw1elU1QoibwSKlabwnicU1kKkqRlykR5OnOOAoab2McGRfwakuMsQUwRU2cUEf6lgBAtIHQrQ4g9olwnafw1MwRhAqQAAUpAO1GCJPn3hwG4D0X0bfEWPeKerSH4TeO3h8NTHEXxCICMf0XfkMcsWMfwBMf2FMVEXkbEfvlpLMTzHIHQvgGSEjupPjHHucCJG0eDEAs3jEQsY3LsU8QcZVHMfcWMY8feMcB0Z0CoYQOUVjF8a1kBqkK8b8WCTsHcRdNgXqJbrKJSC1B1KPJ7mdDwEoByNYiiEWtwJAEoNwOOCUhEVzO9J8FcfxHHDtPMe8YseAOsascMb0f0UUAIJMVTF8ZCfkc8UcWDBdP8UsSyQMcHsyaMWyVsVMdTNyX8YCXySCRdNCUUXYJ8RdOIRwJIdIa9IbOUSvPxAsZ-o-lkCaqkFImEJHlHpThHiIO0YCTYNTEqaXn8BwcXOICWOzJfpabJCotAWpPmMCScRAPAKIQWjoDQOoiiNjDYDoA4BYMNsepyUxK0ovlMNaVQTjHaQ6YUaXlMOSWAa2LSS6qxDYAae7LKSajmf7goEDOvGLtLFSRadHmYKkLaWRIQPaaCdmcCSKkNOQJ4AwMgE6OQPuOIPyKrlMC6c1u6f_q4ZxHJApEpCpKHDaV8c8R_C7KsCuYqYUQGXwCmpjEvuXkTCzImQ8XqMQMif1KiRfgeQqWxOqZqddtqQqJeW1B_NzLKFUFQMwkjGkB6TUMcV6TID6cSsuWYAGUVMGeoKGdoOGRwJGfcdGdoLGf0GjlKfccmQGWma2TeB2duQBupjmR-ScZKuqv2cgCBCORKqrrCfeWyBIVIU-W9OUd7PxEUb4NSX8BcR4JTpudZIuqsP8EugJXoHoDOYESBcXmpDhTkHhWxI6RBUGSGTFmGSuPBbKFGTGXGWhaeZhSUccdTA-YxXqM-ZzOUWagwAAGosxsztQ3QiDyrjCX6pzQW0gHSJaOXrBGASk4DGAPCFleq2D6hOBvD6g6k8wipipyDjbtSwVqWUDRVjkRUQAzRCLPg0DaBqouYXq6r6q-YtYTxmoKZ-YxZFpxpOoLFuqLQeoLE-oRZe4pqez6j5C0icX8nyWFGiXdkQAD6rZpaFG-zfbaB_DL5UxuUcCJYprr4iCGA-XmmYwuUfB5kBWZ42C0g37pnEAWXWV2p2VuD6gpkuWbVrkNjlFFQD6PT9SUGoBhpXViYFplWJa1XnpJoppQR-pL6IypCOWtx3nLx0lBVOB6AiC-DAlZkEXdpdXHFHUrVaThXyBFSEyXUXDiCMIaK5odAPU2XFqlp0kVpVrvXyCZoOUWmw2VQ2DBUoAg1g2dkQ1AZQ2Cy6TQWrkA3w2BkMktq6CoDNqtoNZLZKl1X9qDor4jpjrkaTodBI67qLrLpkbiAUabrbo0YHpMB0DHoFBnoXo47ZbgD3rYAfX1pNUtVtVyCOWbXbXY17UHUfCNXm1KA7W2X9huCtXAmjWeUiCv6elFTRYgTgDNoJCEBYDnGEbzqiIdA3oYB9DMAIX4VqaQ16BLVDSOziCYxFTtTyatBMQcD5A826CAzepKkx0dV00VDA0KpLXQ1M3HWs2nXJXgDcBNbqVvrfUWlm3UwW27VO3W3HFNlKmGnHCB1OjbEtm01x3gkGBhUjXl4yVEA2B91lmD2TFt6elNlUCwxcasa6BbkZltlz2FH92L3bGxk6Afwz3tnz2PqH3rVaBb1Ega5a46564G5G4m5m6QA2Br30wb0xkV20WH4l20BQ1mU8xXEWGkzmxFGvmomk1clKC8BPkZBQODSNi13yDoFogMgEkMDcBTR8FozLC_VNnuxYOpDmDk4WVMzY0fCjXEOU7rAzWsDzWRmYlMAMOFGGCJ0SyUE0MsNrAzV3Izm0OsNGD5gcP6V_1XHwMmW6i8MoPANoPHYMgO0cC4PqH4MwNwlwMsLSOFrY34mElYBvBkPeBKCUN2qVDMU8zoOYMGMNlOU7QSVCNvBXHcD5B4ksPcBgXSnaMcCu3l4uMer0MiNiBMOyhNlpmrGh6cBuDuNYPcAcx_UdFyX_1j10AbX-klFJ2UGYwuxlW36DED4MAxN6MeNYAv4JOjVggtriwYC17YhgjFN2o3lEiLUoh5mHlpBRkBNODTUi58z9hiB7qel3k2DdOpBFofztM0Ms1Fm2BjO9NAzqIDOcBDMHlk3FljMiATNtPiPtXEBGVamWMpw2H8zOVV36TViEHECMYEA4DKYMBJQnxTBYPSAuAoTTiKzKwKi7Q9h9wZCZ1oiPgcjgpeg-jfNZx4NqxfHWMcBxNYCqOozvOyhFpQtwk-PEBCNIsnHhhvMKjQi4sfgKy0BKwMDfPfhmQAtAtGAgveiTjgu0AItmqotsQwvKOMscBYtyAovSDePXZmNsz6PYNYBYvawKjpwHx0Bku_N9jfNyAzqLSQCsD3oegADMnk6JH4-YAAEnqm6Kq-qxER-PaI6AIByCUga7KyyGyOaFgLSCzHOGzBq5-Zy1nDnHnNICDE5dTDC3C69Fi9gtWOQPaJXIACjkQoQbKMEgRhUASgYrwoBCCYTzR4XY2Y6YQguB6igqHAuB2CybvcP4g4Boo4WArQbwJSk4Ab_w5Ume8aWkzL_1szWslbyJ4AorH41YEDNIBMRMlhED9boDPb4DKJnUTbcbTz1YpEN43zHR9bHRnLSp9bSpIryICoPLo9G2l4m1HRxAd4D4T4qAr4S6v-sYIshLVCDcsrSC3jCcnL1Za8G8zA0s9bK8tZm8KJnLbbfoZYibZ8045cErf80rZk8rDAiryrbkoLk4qa2cJM7rtJVxUCUw9EVxCY_7h8OsVzNz-AdzXGBsDY0QtC7KpU4AYD5gPK_YQMGWsAw2IMkwR1_wpHTcbZ0InC-ATbBUau7C3IDA-EDI9zqQ6Ga99zW1SgvHXoXGjUtIJWaIKe3HYQkQhB4E7Uf0_1fMvh_w1Hug2s-Q3HYn9z9YQAA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=es2016%2Creact%2Cstage-2&prettier=false&targets=&version=7.7.4&externalPlugins=

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

// START - Program.js
const lineToString = line => {
  return line.op + ' ' + line.args[0] + ' ' + (line.args[1] || '');
};

const Program = ({
  program,
  instruction
} = {}) => {
  const rows = program.map((line, i) => {
    const active = i === instruction;
    const active_class = active ? 'active' : '';
    return React.createElement("tr", {
      className: active_class
    }, React.createElement("td", {
      className: active_class
    }, active ? React.createElement("b", {
      style: {
        color: 'maroon'
      }
    }, "*") : ''), React.createElement("td", {
      className: active_class,
      style: {
        textAlign: 'right',
        paddingRight: '1em'
      }
    }, active ? React.createElement("b", null, i) : i), React.createElement("td", {
      className: active_class
    }, lineToString(line)));
  });
  return React.createElement("div", {
    style: {
      flexGrow: 1
    }
  }, React.createElement("table", null, React.createElement("tbody", null, rows)), React.createElement("div", null, instruction > program.length - 1 ? React.createElement("b", {
    style: {
      color: 'green'
    }
  }, "Done") : null));
}; // END - Program.js
// START - Registers.js


const Registers = ({
  registers
} = {}) => {
  const {
    a,
    b,
    c,
    d
  } = registers;
  return React.createElement("div", null, React.createElement("ul", {
    style: {
      margin: 0,
      paddingLeft: '10px'
    }
  }, React.createElement("li", null, "a: ", a), React.createElement("li", null, "b: ", b), React.createElement("li", null, "c: ", c), React.createElement("li", null, "d: ", d)));
}; // END - Registers.js
// START - BreakOn.js


class BreakOn extends React.Component {
  constructor(props) {
    super(props);
    this.myRef = React.createRef();
  }

  componentDidMount() {
    this.myRef.current.onchange = e => {
      this.props.setDeviceBreakOn(this.myRef.current.value);
    };
  }

  render() {
    return React.createElement("label", null, "Break on: ", React.createElement("input", {
      ref: this.myRef
    }));
  }

} // END - BreakOn.js
// START - Controls.js


const Button = ({
  step,
  steps,
  children
} = {}) => {
  const fn = () => step(steps);

  return React.createElement("button", {
    onClick: fn
  }, children);
};

const Controls = props => {
  return React.createElement("div", null, React.createElement("div", {
    style: {
      textAlign: 'center'
    }
  }, React.createElement(Button, {
    step: props.runUntilBreak
  }, "\u25B6")), React.createElement("div", null, React.createElement(Button, {
    step: props.step,
    steps: 1
  }, ">"), React.createElement(Button, {
    step: props.step,
    steps: 10
  }, "\u226B"), React.createElement(Button, {
    step: props.step,
    steps: 100
  }, "\u22D9")));
}; // END - Controls.js
// START - data.js


const data = [{
  op: 'cpy',
  args: ['a', 'b']
}, {
  op: 'dec',
  args: ['b']
}, {
  op: 'cpy',
  args: ['a', 'd']
}, {
  op: 'cpy',
  args: [0, 'a']
}, {
  op: 'cpy',
  args: ['b', 'c']
}, {
  op: 'inc',
  args: ['a']
}, {
  op: 'dec',
  args: ['c']
}, {
  op: 'jnz',
  args: ['c', -2]
}, {
  op: 'dec',
  args: ['d']
}, {
  op: 'jnz',
  args: ['d', -5]
}, {
  op: 'dec',
  args: ['b']
}, {
  op: 'cpy',
  args: ['b', 'c']
}, {
  op: 'cpy',
  args: ['c', 'd']
}, {
  op: 'dec',
  args: ['d']
}, {
  op: 'inc',
  args: ['c']
}, {
  op: 'jnz',
  args: ['d', -2]
}, {
  op: 'tgl',
  args: ['c']
}, {
  op: 'cpy',
  args: [-16, 'c']
}, {
  op: 'jnz',
  args: [1, 'c']
}, {
  op: 'cpy',
  args: [99, 'c']
}, {
  op: 'jnz',
  args: [77, 'd']
}, {
  op: 'inc',
  args: ['a']
}, {
  op: 'inc',
  args: ['d']
}, {
  op: 'jnz',
  args: ['d', -2]
}, {
  op: 'inc',
  args: ['c']
}, {
  op: 'jnz',
  args: ['c', -5]
}]; // END - data.js
// START - Device.js

/**
 * `cpy x y` _copies_ `x` (either an integer or the _value_ of a register) into register `y`.
 * `inc x` _increases_ the value of register `x` by one.
 * `dec x` _decreases_ the value of register `x` by one.
 * `jnz x y` _jumps_ to an instruction `y` away (positive means forward; negative means backward), but only if `x` is _not zero_.
 *
 * `tgl x` _toggles_ the instruction `x` away (pointing at instructions like `jnz` does: positive means forward; negative means backward):
 *   - For _one-argument_ instructions, `inc` becomes `dec`, and all other one-argument instructions become `inc`.
 *   - For _two-argument_ instructions, `jnz` becomes `cpy`, and all other two-instructions become `jnz`.
 *   - The arguments of a toggled instruction are _not affected_.
 *   - If an attempt is made to toggle an instruction outside the program, _nothing happens_.
 *   - If toggling produces an _invalid instruction_ (like `cpy 1 2`) and an attempt is later made to execute that instruction, `skip it instead`.
 *   - If `tgl` toggles _itself_ (for example, if `a` is `0`, `tgl a` would target itself and become `inc a`), the resulting instruction is not executed until the next time it is reached.
 */

const TOGGLE_TRANSFORMS = {
  inc: 'dec',
  dec: 'inc',
  tgl: 'inc',
  jnz: 'cpy',
  cpy: 'jnz'
};

const parseLine = line => {
  let parts = line.split(' ');
  const registers = ['a', 'b', 'c', 'd'];
  const args = [];

  if (!registers.includes(parts[1])) {
    parts[1] = parseInt(parts[1], 10);
  }

  args.push(parts[1]);

  if (parts[2] != null && !registers.includes(parts[2])) {
    parts[2] = parseInt(parts[2], 10);
  }

  if (parts[2] != null) {
    args.push(parts[2]);
  }

  return {
    op: parts[0],
    args
  };
};
/**
 * I'm not really handling state "the React way"
 * because this component doesn't know when its props change.
 * So I run `forceUpdate` every time the program changes.
 * 🤷‍♂️
 */


class Device extends React.Component {
  constructor(props) {
    super(props);

    _defineProperty(this, "reset", () => {
      this.registers = JSON.parse(JSON.stringify(this.starting_registers));
      this.program = JSON.parse(JSON.stringify(this.starting_program));
      this.instruction = 0;
      this.forceUpdate();
    });

    _defineProperty(this, "run", (register_to_print = 'a') => {
      let line = this.program[this.instruction];

      while (line) {
        let {
          op,
          args
        } = line; // Run the opcode

        this[op].apply(this, args);
        line = this.program[this.instruction];
      }

      return this.registers[register_to_print];
    });

    _defineProperty(this, "runUntilBreak", () => {
      let line = this.program[this.instruction];
      /* eslint-disable */

      while (line) {
        const {
          a,
          b,
          c,
          d
        } = this.registers;
        const i = this.instruction;

        try {
          if (eval(this.state.breakOn)) {
            this.forceUpdate();
            break;
          }
        } catch (e) {}

        let {
          op,
          args
        } = line; // Run the opcode

        this[op].apply(this, args);
        line = this.program[this.instruction];
      }
      /* eslint-enable */


      this.forceUpdate();
    });

    _defineProperty(this, "step", (n = 1) => {
      for (let i = 0; i < n; i++) {
        const {
          op,
          args
        } = this.program[this.instruction]; // Run the opcode

        this[op].apply(this, args);
      }

      this.forceUpdate();
    });

    _defineProperty(this, "getValueOf", x => {
      return typeof x === 'string' ? this.registers[x] : x;
    });

    _defineProperty(this, "cpy", (x, y) => {
      this.instruction++; // Invalid instruction, skip

      if (typeof y !== 'string') {
        return;
      }

      this.registers[y] = this.getValueOf(x);
      return this.registers;
    });

    _defineProperty(this, "inc", x => {
      this.registers[x] += 1;
      this.instruction++;
      return this.registers;
    });

    _defineProperty(this, "dec", x => {
      this.registers[x] -= 1;
      this.instruction++;
      return this.registers;
    });

    _defineProperty(this, "jnz", (x, y) => {
      x = this.getValueOf(x);
      y = this.getValueOf(y);

      if (x === 0) {
        // Then just move forward as normal
        this.instruction++;
      } else {
        // Otherwise, jump our instruction
        this.instruction += y;
      }

      return this.registers;
    });

    _defineProperty(this, "tgl", x => {
      x = this.getValueOf(x);
      let instruction_to_modify = this.instruction + x;

      if (this.program[instruction_to_modify]) {
        let current_op = this.program[instruction_to_modify].op;
        this.program[instruction_to_modify].op = TOGGLE_TRANSFORMS[current_op];
      }

      this.instruction++;
    });

    _defineProperty(this, "setDeviceBreakOn", breakOn => {
      this.setState({
        breakOn
      });
    });

    _defineProperty(this, "handleSetToChange", e => {
      let toSet = e.target.value;

      if (toSet === 'i') {
        toSet = 'instruction';
      } else if (toSet === 'l') {
        toSet = 'line';
      }

      this.setState({
        toSet
      });
    });

    _defineProperty(this, "handleValueChange", e => {
      this.setState({
        valueToSetTo: e.target.value
      });
    });

    _defineProperty(this, "handleSetTo", () => {
      const {
        toSet: setTo,
        valueToSetTo
      } = this.state;

      if (setTo === 'line') {
        let line = parseLine(valueToSetTo);
        this.program[this.instruction] = line;
      } else {
        const value = parseInt(valueToSetTo, 10);

        if (Number.isNaN(value)) {
          return;
        }

        if (this[setTo] !== undefined) {
          this[setTo] = value;
        }

        if (this.registers[setTo] !== undefined) {
          this.registers[setTo] = value;
        }
      }

      this.forceUpdate();
    });

    const {
      program = [],
      starting_registers = {
        a: 7,
        b: 0,
        c: 0,
        d: 0
      },
      starting_instruction = 0
    } = props; // Clone the arrays we pass in

    this.program = JSON.parse(JSON.stringify(program));
    this.registers = JSON.parse(JSON.stringify(starting_registers)); // Save for resets later

    this.starting_registers = starting_registers;
    this.starting_program = program;
    this.instruction = starting_instruction;
    this.state = {
      breakOn: '',
      toSet: 'a',
      valueToSetTo: 12
    };
  }

  render() {
    return React.createElement(React.Fragment, null, React.createElement("div", null, "Set", ' ', React.createElement("input", {
      style: {
        width: '9em'
      },
      onChange: this.handleSetToChange,
      value: this.state.toSet
    }), ' ', "=", ' ', React.createElement("input", {
      style: {
        width: '9em'
      },
      onChange: this.handleValueChange,
      value: this.state.valueToSetTo
    }), React.createElement("button", {
      style: {
        fontSize: '13px',
        lineHeight: '13px',
        padding: '2px',
        color: 'royalblue'
      },
      onClick: () => this.handleSetTo()
    }, React.createElement("span", null, "\u2714"), "\uFE0F Set")), React.createElement("div", {
      className: "device"
    }, React.createElement("div", {
      style: {
        flexGrow: 2
      }
    }, React.createElement(Registers, {
      registers: this.registers
    }), React.createElement("br", null), React.createElement(BreakOn, {
      setDeviceBreakOn: this.setDeviceBreakOn
    })), React.createElement(Program, {
      program: this.program,
      instruction: this.instruction
    }), this.instruction > this.program.length - 1 ? null : React.createElement(Controls, {
      step: this.step,
      runUntilBreak: this.runUntilBreak
    })), React.createElement("button", {
      style: {
        fontSize: '1em'
      },
      onClick: this.reset
    }, "Reset"));
  }

} // END - Device.js


function App() {
  return React.createElement(Device, {
    program: data
  });
}

const rootElement = document.getElementById('root');
ReactDOM.render(React.createElement(App, null), rootElement);